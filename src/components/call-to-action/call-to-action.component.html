<section id="demo" class="py-16 md:py-24 bg-purple-600 text-white relative">
  <div class="container mx-auto px-6 text-center max-w-4xl">
    <h2 class="text-3xl md:text-5xl font-extrabold mb-6">
      Pronto para Ver a Automação em Ação?
    </h2>
    <p class="text-lg md:text-xl mb-12 opacity-90">
      Preencha o formulário abaixo e nossa equipe entrará em contato para agendar uma demonstração personalizada do sistema Ezequiel Marketing Automation.
    </p>

    <form [formGroup]="demoForm" (ngSubmit)="openConfirmationModal()" class="bg-white p-8 md:p-12 rounded-lg shadow-xl text-gray-800">
      <div class="mb-6 text-left">
        <label for="name" class="block text-gray-700 text-sm font-bold mb-2">Seu Nome:</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          placeholder="Seu nome completo"
        >
        @if (demoForm.get('name')?.invalid && demoForm.get('name')?.touched) {
          <p class="text-red-500 text-xs italic mt-1">Nome é obrigatório.</p>
        }
      </div>
      <div class="mb-6 text-left">
        <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Seu Email:</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          placeholder="seuemail@exemplo.com"
        >
        @if (demoForm.get('email')?.invalid && demoForm.get('email')?.touched) {
          @if (demoForm.get('email')?.errors?.['required']) {
            <p class="text-red-500 text-xs italic mt-1">Email é obrigatório.</p>
          }
          @if (demoForm.get('email')?.errors?.['email']) {
            <p class="text-red-500 text-xs italic mt-1">Por favor, insira um email válido.</p>
          }
        }
      </div>
      <div class="mb-6 text-left">
        <label for="companyName" class="block text-gray-700 text-sm font-bold mb-2">Nome da Empresa:</label>
        <input
          type="text"
          id="companyName"
          formControlName="companyName"
          class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          placeholder="Nome da sua empresa"
        >
        @if (demoForm.get('companyName')?.invalid && demoForm.get('companyName')?.touched) {
          <p class="text-red-500 text-xs italic mt-1">Nome da empresa é obrigatório.</p>
        }
      </div>
      <div class="mb-6 text-left">
        <label for="phoneNumber" class="block text-gray-700 text-sm font-bold mb-2">Telefone:</label>
        <input
          type="tel"
          id="phoneNumber"
          formControlName="phoneNumber"
          class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          placeholder="(XX) XXXXX-XXXX"
        >
        @if (demoForm.get('phoneNumber')?.invalid && demoForm.get('phoneNumber')?.touched) {
          @if (demoForm.get('phoneNumber')?.errors?.['required']) {
            <p class="text-red-500 text-xs italic mt-1">Telefone é obrigatório.</p>
          }
          @if (demoForm.get('phoneNumber')?.errors?.['pattern']) {
            <p class="text-red-500 text-xs italic mt-1">Por favor, insira um telefone válido (ex: (XX) XXXXX-XXXX).</p>
          }
        }
      </div>
      <div class="mb-8 text-left">
        <label for="message" class="block text-gray-700 text-sm font-bold mb-2">Sua Mensagem (Opcional):</label>
        <textarea
          id="message"
          formControlName="message"
          rows="5"
          class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          placeholder="Gostaria de saber mais sobre..."
        ></textarea>
      </div>
      <button
        type="submit"
        [disabled]="demoForm.invalid"
        class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Enviar Solicitação
      </button>
    </form>
  </div>

  @if (showConfirmationModal()) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white p-8 rounded-lg shadow-2xl max-w-md w-full text-gray-800 text-center relative">
        <h3 class="text-2xl font-bold mb-4">Confirmar Solicitação de Demonstração</h3>
        <p class="mb-6 text-gray-700">Por favor, revise os detalhes da sua solicitação antes de confirmar.</p>

        <div class="text-left mb-6 space-y-2">
          <p><strong>Nome:</strong> {{ demoForm.value.name }}</p>
          <p><strong>Email:</strong> {{ demoForm.value.email }}</p>
          <p><strong>Empresa:</strong> {{ demoForm.value.companyName }}</p>
          <p><strong>Telefone:</strong> {{ demoForm.value.phoneNumber }}</p>
          @if (demoForm.value.message) {
            <p><strong>Mensagem:</strong> {{ demoForm.value.message }}</p>
          } @else {
            <p><strong>Mensagem:</strong> Nenhuma mensagem fornecida.</p>
          }
        </div>

        <div class="flex justify-center space-x-4">
          <button
            (click)="confirmSubmission()"
            class="bg-purple-700 hover:bg-purple-800 text-white font-bold py-2 px-6 rounded-full transition duration-300 ease-in-out transform hover:scale-105"
          >
            Confirmar Envio
          </button>
          <button
            (click)="cancelSubmission()"
            class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-full transition duration-300 ease-in-out transform hover:scale-105"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  }
</section>